function popupwindow(n,e,o,t){var i=screen.width/2-o/2,a=screen.height/2-t/2-200;return window.open(n,e,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+t+", top="+a+", left="+i)}!function(n){var e;if("function"==typeof define&&define.amd)define(["jquery"],n);else if("object"==typeof exports){try{e=require("jquery")}catch(o){}module.exports=n(e)}else{var t=window.Cookies,i=window.Cookies=n(window.jQuery);i.noConflict=function(){return window.Cookies=t,i}}}(function(n){function e(n){return d.raw?n:encodeURIComponent(n)}function o(n){return d.raw?n:decodeURIComponent(n)}function t(n){return e(d.json?JSON.stringify(n):String(n))}function i(n){0===n.indexOf('"')&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(s," ")),d.json?JSON.parse(n):n}catch(e){}}function a(n,e){var o=d.raw?n:i(n);return c(e)?e(o):o}function r(){for(var n,e,o=0,t={};o<arguments.length;o++){e=arguments[o];for(n in e)t[n]=e[n]}return t}function c(n){return"[object Function]"===Object.prototype.toString.call(n)}var s=/\+/g,d=function(n,i,s){if(arguments.length>1&&!c(i)){if(s=r(d.defaults,s),"number"==typeof s.expires){var f=s.expires,l=s.expires=new Date;l.setMilliseconds(l.getMilliseconds()+864e5*f)}return document.cookie=[e(n),"=",t(i),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var u=n?void 0:{},p=document.cookie?document.cookie.split("; "):[],m=0,h=p.length;h>m;m++){var g=p[m].split("="),v=o(g.shift()),w=g.join("=");if(n===v){u=a(w,i);break}n||void 0===(w=a(w))||(u[v]=w)}return u};return d.get=d.set=d,d.defaults={},d.remove=function(n,e){return d(n,"",r(e,{expires:-1})),!d(n)},n&&(n.cookie=d,n.removeCookie=d.remove),d}),function(){var n={pending_functions:[],loop_and_call:function(){if(n.pending_functions.length)for(var e=0;e<n.pending_functions.length;e++){var o=n.pending_functions[e],t=document.getElementById(o.id);if(o.id==document&&(t=document.body),t){var i=o.f;n.pending_functions.splice(e,1),"itself"==o.c&&(o.c=t),i.call(o.c),e--}}},global_interval:setInterval(function(){n.loop_and_call()},5)};document.addEventListener&&(document.addEventListener("DOMNodeInserted",n.loop_and_call,!1),clearInterval(n.global_interval)),window.waitUntilExists=function(e,o,t){t=t||window,"function"==typeof e&&(t=o,o=e,e=document),n.pending_functions.push({f:o,id:e,c:t})},waitUntilExists.stop=function(e,o){for(var t=0;t<n.pending_functions.length;t++)n.pending_functions[t].id!=e||"undefined"!=typeof o&&n.pending_functions[t].f!=o||n.pending_functions.splice(t,1)},waitUntilExists.stopAll=function(){n.pending_functions=[]}}();var facebookInit=function(n){var e=$(".fb-share");e.off().on({click:function(e){e.preventDefault();var o,t=$(e.target),i=t.parents(".featured-article");o=i.length?i.find("a.post-header").attr("href"):window.location.href,n.ui({method:"share",href:o,display:"iframe"})}})};window.fbAsyncInit=function(){FB.init({appId:"1500566816925880",xfbml:!0,version:"v2.4"}),"function"==typeof facebookInit&&facebookInit(FB)},function(n,e,o){var t,i=n.getElementsByTagName(e)[0];n.getElementById(o)||(t=n.createElement(e),t.id=o,t.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(t,i))}(document,"script","facebook-jssdk"),$(function(){var n=function(){var n=$(".tw-share");n.off().on({click:function(n){n.preventDefault();var e=$(n.target);popupwindow(e.attr("href"),"tweet",500,300)}})};n()}),waitUntilExists("site-header",function(){var n=Cookies.get("zenmode");"on"===n&&($("body").addClass("zen-mode no-anim"),setTimeout(function(){$("body").removeClass("no-anim")},100))}),$(function(){$(".hamburger").on({click:function(n){n.preventDefault(),$(window).width()<960?$("body").hasClass("menu-out")?$("body").removeClass("menu-out"):$("body").addClass("menu-out"):$("body").hasClass("zen-mode")?($("body").removeClass("zen-mode"),Cookies.set("zenmode","off",{expires:7,path:"/"})):($("body").addClass("zen-mode"),Cookies.set("zenmode","on",{expires:7,path:"/"}))}})}),$(function(){$(".no-nav").on({click:function(n){n.preventDefault()}})}),$(function(){$(".site-top-nav").length>0?$(window).on({scroll:function(){$(window).scrollTop()>$(".site-top-nav").height()?$("body").addClass("fixed"):$("body").removeClass("fixed")}}):$("body").addClass("fixed")}),$(function(){if($(".site-nav").length){var n=0,e=$(".site-nav");$(window).on("scroll",function(){var o=$(this).scrollTop(),t=o-n,i=($(window).innerHeight()+$(window).scrollTop(),e.offset().top+e.innerHeight(),e.scrollTop()+t);e.scrollTop($("body").hasClass("fixed")?i:0),n=o})}}),$(function(){commentsInit=function(){var n=$(".comment-link");n.off().on({click:function(n){n.preventDefault();var e=$(n.target),o=e.parents(".featured-article");if(o.length){var t=o.children("a.post-header").attr("href")+"#comments";window.location.href=t}else $("html,body").scrollTop(0).animate({scrollTop:$("#comments").offset().top},1200)}})},"#comments"===window.location.hash&&$("html,body").scrollTop(0).animate({scrollTop:$("#comments").offset().top},1200),commentsInit()});var loadDataImages=function(){$("[data-bg]").each(function(){var n=$(this),e=$(this).attr("data-bg"),o=new Image;o.src=e,o.onload=function(){n.removeAttr("data-bg").css({opacity:0,backgroundImage:"url("+e+")"}).animate({opacity:1},200)}}),$("img[data-src]").each(function(){var n=$(this),e=$(this).attr("data-src"),o=new Image;o.src=e,o.onload=function(){n.css({opacity:0}).removeAttr("data-src").attr("src",e).animate({opacity:1},200)}})};$(window).on("load",function(){loadDataImages()});
