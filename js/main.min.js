function popupwindow(e,t,n,o){var i=screen.width/2-n/2,r=screen.height/2-o/2-200;return window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+o+", top="+r+", left="+i)}!function(e){var t;if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof exports){try{t=require("jquery")}catch(n){}module.exports=e(t)}else{var o=window.Cookies,i=window.Cookies=e(window.jQuery);i.noConflict=function(){return window.Cookies=o,i}}}(function(e){function t(e){return l.raw?e:encodeURIComponent(e)}function n(e){return l.raw?e:decodeURIComponent(e)}function o(e){return t(l.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),l.json?JSON.parse(e):e}catch(t){}}function r(e,t){var n=l.raw?e:i(e);return a(t)?t(n):n}function s(){for(var e,t,n=0,o={};n<arguments.length;n++){t=arguments[n];for(e in t)o[e]=t[e]}return o}function a(e){return"[object Function]"===Object.prototype.toString.call(e)}var c=/\+/g,l=function(e,i,c){if(arguments.length>1&&!a(i)){if(c=s(l.defaults,c),"number"==typeof c.expires){var d=c.expires,f=c.expires=new Date;f.setMilliseconds(f.getMilliseconds()+864e5*d)}return document.cookie=[t(e),"=",o(i),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var u=e?void 0:{},p=document.cookie?document.cookie.split("; "):[],m=0,v=p.length;v>m;m++){var h=p[m].split("="),g=n(h.shift()),y=h.join("=");if(e===g){u=r(y,i);break}e||void 0===(y=r(y))||(u[g]=y)}return u};return l.get=l.set=l,l.defaults={},l.remove=function(e,t){return l(e,"",s(t,{expires:-1})),!l(e)},e&&(e.cookie=l,e.removeCookie=l.remove),l}),function(){var e={pending_functions:[],loop_and_call:function(){if(e.pending_functions.length)for(var t=0;t<e.pending_functions.length;t++){var n=e.pending_functions[t],o=document.getElementById(n.id);if(n.id==document&&(o=document.body),o){var i=n.f;e.pending_functions.splice(t,1),"itself"==n.c&&(n.c=o),i.call(n.c),t--}}},global_interval:setInterval(function(){e.loop_and_call()},5)};document.addEventListener&&(document.addEventListener("DOMNodeInserted",e.loop_and_call,!1),clearInterval(e.global_interval)),window.waitUntilExists=function(t,n,o){o=o||window,"function"==typeof t&&(o=n,n=t,t=document),e.pending_functions.push({f:n,id:t,c:o})},waitUntilExists.stop=function(t,n){for(var o=0;o<e.pending_functions.length;o++)e.pending_functions[o].id!=t||"undefined"!=typeof n&&e.pending_functions[o].f!=n||e.pending_functions.splice(o,1)},waitUntilExists.stopAll=function(){e.pending_functions=[]}}();var facebookInit=function(e){var t=$(".fb-share");t.off().on({click:function(t){t.preventDefault();var n,o=$(t.target),i=o.parents(".featured-article");n=i.length?i.find("a.post-header").attr("href"):window.location.href,e.ui({method:"share",href:n,display:"iframe"})}})};window.fbAsyncInit=function(){FB.init({appId:"1500566816925880",xfbml:!0,version:"v2.4"}),"function"==typeof facebookInit&&facebookInit(FB)},function(e,t,n){var o,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(o=e.createElement(t),o.id=n,o.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk"),$(function(){var e=function(){var e=$(".tw-share");e.off().on({click:function(e){e.preventDefault();var t=$(e.target);popupwindow(t.attr("href"),"tweet",500,300)}})};e()}),function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.autosize=t()}(this,function(){function e(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),e.style.wordWrap="break-word";var r=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=r,o="none"!==t.maxHeight?parseFloat(t.maxHeight):!1,i="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),n()}function n(){var t=e.style.height,n=document.documentElement.scrollTop,r=document.body.scrollTop;e.style.height="auto";var s=e.scrollHeight+i;if(o!==!1&&s>o?(s=o,"scroll"!==e.style.overflowY&&(e.style.overflowY="scroll")):"hidden"!==e.style.overflowY&&(e.style.overflowY="hidden"),e.style.height=s+"px",document.documentElement.scrollTop=n,document.body.scrollTop=r,t!==e.style.height){var a=document.createEvent("Event");a.initEvent("autosize.resized",!0,!1),e.dispatchEvent(a)}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var o,i;"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",n),window.addEventListener("resize",n),e.addEventListener("input",n),e.addEventListener("autosize.update",n),e.addEventListener("autosize.destroy",function(t){window.removeEventListener("resize",n),e.removeEventListener("input",n),e.removeEventListener("keyup",n),e.removeEventListener("autosize.destroy"),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),e.removeAttribute("data-autosize-on")}.bind(e,{height:e.style.height,overflow:e.style.overflow,overflowY:e.style.overflowY,wordWrap:e.style.wordWrap,resize:e.style.resize})),e.setAttribute("data-autosize-on",!0),e.style.overflow="hidden",e.style.overflowY="hidden",t()}}return"function"!=typeof window.getComputedStyle?function(e){return e}:function(t){return t&&t.length?Array.prototype.forEach.call(t,e):t&&t.nodeName&&e(t),t}}),$("select").each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var n=e.next("div.select-styled");n.text(e.children("option").eq(0).text());for(var o=$("<ul />",{"class":"select-options"}).insertAfter(n),i=0;t>i;i++)$("<li />",{text:e.children("option").eq(i).text(),rel:e.children("option").eq(i).val()}).appendTo(o);var r=o.children("li");n.click(function(e){e.stopPropagation(),$(this).parent(".select").next("label").addClass("stayup"),$("div.select-styled.active").each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),r.click(function(t){t.stopPropagation(),n.text($(this).text()).removeClass("active").addClass("success"),e.val($(this).attr("rel")),o.hide()}),$(document).click(function(){n.removeClass("active"),o.hide()})});var checkSuccess=function(e){""===e.val()?e.removeClass("success").next("label").removeClass("stayup"):e.is('input[type="checkbox"], input[type="radio"]')||e.addClass("success").next("label").addClass("stayup")},formHandleResponse=function(e,t){if(t.removeClass("loading"),e.success){if(!t.find(".form-success").length){var n=$('<div class="form-success"></div>');t.html(n)}t.find(".form.error").remove(),t.find(".form-success").html(e.success),t.addClass("success")}if(e.error){if(!t.find(".form-error").length){var o=$('<div class="form-error"></div>');t.append(o)}t.find(".form-error").html(e.error),t.addClass("error")}},validateForm=function(e){var t=!0;return e.find("input").each(function(){$(this).hasClass("error")&&(t=!1)}),t?!0:!1},validateEmail=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},formJsInit=function(){$("form input, form textarea").each(function(){checkSuccess($(this))}),autosize($("form textarea:not(.no-autosize)")),$("form input, form textarea").each(function(){var e=$(this);checkSuccess(e)}),$("form input, form textarea").off().on("blur",function(e){var t=$(e.target);t.removeClass("error"),checkSuccess(t),t.is('input[type="email"]')&&""!==t.val()&&(validateEmail(t.val())||t.addClass("error"))}),$("form").off().on({keyup:function(e){var t=$(e.target);if(t.removeClass("error").removeClass("success"),t.is('input[type="number"]')){var n=t.val().replace(/[^0-9]/g,"");t.val(n)}},click:function(e){var t=$(e.target);if(t.is(".submit")){e.preventDefault();var n=t.parents("form"),o=n.attr("action"),i=n.serialize();!validateForm(n)||n.hasClass("loading")||n.hasClass("success")||(n.addClass("loading"),$.ajax({url:o,type:"POST",data:i,dataType:"json",success:function(e){formHandleResponse(e,n)}}))}}})};$(function(){formJsInit()}),waitUntilExists("site-header",function(){var e=Cookies.get("zenmode");"on"===e&&($("body").addClass("zen-mode no-anim"),setTimeout(function(){$("body").removeClass("no-anim")},100))}),$(function(){$(".hamburger").on({click:function(e){e.preventDefault(),$(window).width()<960?$("body").hasClass("menu-out")?$("body").removeClass("menu-out"):$("body").addClass("menu-out"):$("body").hasClass("zen-mode")?($("body").removeClass("zen-mode"),Cookies.set("zenmode","off",{expires:7,path:"/"})):($("body").addClass("zen-mode"),Cookies.set("zenmode","on",{expires:7,path:"/"}))}})}),$(function(){$(".no-nav").on({click:function(e){e.preventDefault()}})}),$(function(){$(".site-top-nav").length>0?$(window).on({scroll:function(){$(window).scrollTop()>$(".site-top-nav").height()?$("body").addClass("fixed"):$("body").removeClass("fixed")}}):$("body").addClass("fixed")}),$(function(){if($(".site-nav").length){var e=0,t=$(".site-nav");$(window).on("scroll",function(){var n=$(this).scrollTop(),o=n-e,i=($(window).innerHeight()+$(window).scrollTop(),t.offset().top+t.innerHeight(),t.scrollTop()+o);t.scrollTop($("body").hasClass("fixed")?i:0),e=n})}}),$(function(){commentsInit=function(){var e=$(".comment-link");e.off().on({click:function(e){e.preventDefault();var t=$(e.target),n=t.parents(".featured-article");if(n.length){var o=n.children("a.post-header").attr("href")+"#comments";window.location.href=o}else $("html,body").scrollTop(0).animate({scrollTop:$("#comments").offset().top},1200)}})},"#comments"===window.location.hash&&$("html,body").scrollTop(0).animate({scrollTop:$("#comments").offset().top},1200),commentsInit()});var loadDataImages=function(){$("[data-bg]").each(function(){var e=$(this),t=$(this).attr("data-bg"),n=new Image;n.src=t,n.onload=function(){e.removeAttr("data-bg").css({opacity:0,backgroundImage:"url("+t+")"}).animate({opacity:1},200)}}),$("img[data-src]").each(function(){var e=$(this),t=$(this).attr("data-src"),n=new Image;n.src=t,n.onload=function(){e.css({opacity:0}).removeAttr("data-src").attr("src",t).animate({opacity:1},200)}})};$(window).on("load",function(){loadDataImages()});
